<p-popover #op>
    <ng-container [ngSwitch]="type">

        <!-- TYPE: LIST -->
        <ng-container *ngSwitchCase="'list'">
            <div class="popover-content">
                <!-- Header with translation -->
                <div class="popover-header">
                    <h3>{{ getTranslatedText('CUSTOM_POPOVER.TITLE.SELECT') }}</h3>
                </div>

                <!-- List of items -->
                <div class="popover-list">
                    <div *ngFor="let item of values; let i = index" class="popover-item"
                        [ngStyle]="{'backgroundColor': getItemBackgroundColor(i)}" (click)="onSelect(item)"
                        (keydown.enter)="onSelect(item)" tabindex="0">

                        <!-- Main content -->
                        <div class="item-fields-container">
                            <ng-container *ngFor="let field of displayFields; let fieldIndex = index">

                                <!-- Field as badge -->
                                <span *ngIf="shouldShowAsBadge(field)" class="badge" [ngStyle]="getBadgeStyles(i)">
                                    {{ getFieldValue(item, field) }}
                                </span>

                                <!-- Field as text -->
                                <span *ngIf="!shouldShowAsBadge(field)" class="text-field">
                                    {{ getFieldValue(item, field) }}
                                </span>

                                <!-- Separator (except the last one)-->
                                <span *ngIf="shouldShowSeparator(fieldIndex)" class="separator">â€¢</span>
                            </ng-container>
                        </div>

                        <!-- Visual indicator for holidays (with translation)-->
                        <div *ngIf="isHoliday(item)" class="holiday-indicator">
                            <i class="pi pi-sun"></i>
                            <span>{{ getTranslatedText('CUSTOM_POPOVER.INDICATOR.HOLIDAY') }}</span>
                        </div>
                    </div>
                </div>

                <!-- Footer with translation -->
                <div class="popover-footer">
                    <button pButton [label]="getTranslatedText('CUSTOM_POPOVER.BUTTON.CLEAR')" icon="pi pi-times"
                        class="p-button-text p-button-sm" (click)="onSelect(null)"></button>
                </div>
            </div>
        </ng-container>

        <!-- DEFAULT (with translation) -->
        <ng-container *ngSwitchDefault>
            <div class="popover-default">
                <div class="default-icon">
                    <i class="pi pi-inbox"></i>
                </div>
                <span>{{ getTranslatedText('CUSTOM_POPOVER.MESSAGE.NO_OPTIONS') }}</span>
            </div>
        </ng-container>

    </ng-container>
</p-popover>