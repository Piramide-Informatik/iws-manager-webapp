<div class="card">
  <master-data-genaral-table
    [tableId]="tableKey"
    [tableValues]="employmentContracts"
    [columns]="selectedColumns"
    [userPreferences]="userWorkContractsPreferences"
    [dataKeys]="dataKeys"
    removeKey="id"
    (onColumnChanges)="onUserWorkContractsPreferencesChanges($event)"
    (onEditRegister)="handleTableEvents({ type: 'edit', data: $event })"
    (onDeleteRegister)="handleTableEvents({ type: 'delete', data: $event })"
    (onCreateRegister)="handleTableEvents({ type: 'create' })"
    [isFileUploadButtonVisible]="true"
    [customerUploadButtonText]="'BUTTONS.IMPORT_EMPLOYEE_CONTRACTS' | translate"
    acceptFilesFormats="image/*"
  ></master-data-genaral-table>
  <p-dialog 
    [header]="modalType === 'edit' 
      ? ('EMPLOYEE-CONTRACTS.LABEL.EDIT_EMPLOYEE_CONTRACT' | translate) 
      : modalType === 'create' 
       ? ('EMPLOYEE-CONTRACTS.LABEL.CREATE_EMPLOYEE_CONTRACT' | translate) 
       : ('EMPLOYEE-CONTRACTS.LABEL.DELETE_EMPLOYEE_CONTRACT' | translate)" 
    [modal]="true" 
    [(visible)]="visibleModal"
  >
    <app-contract-details
      [modalType]="modalType"
      [visibleModal]="visibleModal"
      [currentEmploymentContractEntity]="currentContract"
      (isVisibleModal)="onModalVisibilityChange($event)"
      (deletedEmployeeContract)="onDeleteEmployeeContract($event)"
      (onContractCreated)="onCreateEmployeeContract()"
      (onContractUpdated)="onUpdateEmployeeContract($event)"
    ></app-contract-details>
  </p-dialog>
</div>