<ng-container *ngIf="isCreateMode; else deleteTemplate">
   <form [formGroup]="ContractDetailsForm" (ngSubmit)="onSubmit()">
    <div class="mt-4 mx-3">
      <div class="contract_input">
        <label for="employeNro">{{ 'EMPLOYEE-CONTRACTS.FORM.EMPLOYEE_ID' | translate }}</label>
        <p-select inputId="employeNro" 
          #pSelect
          formControlName="employeNro" 
          [options]="employeeSelectOptions"
          optionLabel="employeeNo"
          optionValue="employeeId"
          [style]="{'text-align': 'right'}"
          panelStyleClass="custom-dropdown-panel"
          showClear
          [emptyMessage]="'TABLES.NO_RESULTS_FOUND' | translate"
        ></p-select>
      </div>
      <div class="contract_input">
        <label for="firstName">{{ 'EMPLOYEE-CONTRACTS.FORM.FIRST_NAME' | translate }}</label>
        <input pInputText type="text" id="firstName" formControlName="firstName" autocomplete="off">
      </div>
      <div class="contract_input">
        <label for="lastName">{{ 'EMPLOYEE-CONTRACTS.FORM.LAST_NAME' | translate }}</label>
        <input pInputText type="text" id="lastName" formControlName="lastName" autocomplete="off">
      </div>
      <div class="contract_input">
        <label for="startDate">{{ 'EMPLOYEE-CONTRACTS.FORM.START_DATE' | translate }}</label>
        <p-datepicker inputId="startDate"
          formControlName="startDate"
          [showIcon]="true"
          [showClear]="true"
          dateFormat="dd.mm.yy"
          [ngClass]="{'ng-invalid': ContractDetailsForm.get('startDate')?.invalid && ContractDetailsForm.get('startDate')?.dirty && ContractDetailsForm.get('startDate')?.touched}">
        </p-datepicker>
        <p-message severity="error" variant="simple" size="small" *ngIf="ContractDetailsForm.get('startDate')?.invalid && ContractDetailsForm.get('startDate')?.dirty">
          {{ 'ERROR.DATE_FORMAT_ERROR' | translate }}
        </p-message>
      </div>
      <div class="contract_input">
        <label for="salaryPerMonth">{{ 'EMPLOYEE-CONTRACTS.FORM.SALARY_PER_MONTH' | translate }}</label>
        <p-inputnumber mode="decimal" [max]="99999.99" [min]="0" [useGrouping]="true" [inputStyle]="{'text-align': 'right'}"
          [minFractionDigits]="2" [maxFractionDigits]="2" locale="de-DE" inputId="salaryPerMonth" formControlName="salaryPerMonth" autocomplete="off"
          [ngClass]="{'ng-invalid': ContractDetailsForm.get('salaryPerMonth')?.invalid && ContractDetailsForm.get('salaryPerMonth')?.dirty && ContractDetailsForm.get('salaryPerMonth')?.touched}" />
        <p-message severity="error" variant="simple" size="small" *ngIf="ContractDetailsForm.get('salaryPerMonth')?.invalid && ContractDetailsForm.get('salaryPerMonth')?.dirty && ContractDetailsForm.get('salaryPerMonth')!.hasError('pattern')">
          {{ 'ERROR.NUMBER_FORMAT_ERROR' | translate }}
        </p-message>
      </div>
      <div class="contract_input">
        <label for="hoursPerWeek">{{ 'EMPLOYEE-CONTRACTS.FORM.WEEKLY_HOURS' | translate }}</label>
        <p-inputnumber mode="decimal" [max]="99999.99" [min]="0" [useGrouping]="true" [inputStyle]="{'text-align': 'right'}"
          [minFractionDigits]="2" [maxFractionDigits]="2" locale="de-DE" inputId="hoursPerWeek" formControlName="hoursPerWeek" autocomplete="off"
          [ngClass]="{'ng-invalid': ContractDetailsForm.get('hoursPerWeek')?.invalid && ContractDetailsForm.get('hoursPerWeek')?.dirty && ContractDetailsForm.get('hoursPerWeek')?.touched}" />
        <p-message severity="error" variant="simple" size="small" *ngIf="ContractDetailsForm.get('hoursPerWeek')?.invalid && ContractDetailsForm.get('hoursPerWeek')?.dirty && ContractDetailsForm.get('hoursPerWeek')!.hasError('pattern')">
          {{ 'ERROR.NUMBER_FORMAT_ERROR' | translate }}
        </p-message>
      </div>
      <div class="contract_input">
        <label for="workShortTime">{{ 'EMPLOYEE-CONTRACTS.FORM.WORK_SHORT_TIME' | translate }}</label>
        <div class="input-message">
          <p-inputnumber mode="decimal" [min]="0" [useGrouping]="true" [inputStyle]="{'text-align': 'right'}"
            [minFractionDigits]="2" [maxFractionDigits]="2" locale="de-DE" inputId="workShortTime" formControlName="workShortTime" autocomplete="off"
            invalid="
           ContractDetailsForm.get('workShortTime')?.invalid
            && ContractDetailsForm.get('workShortTime')?.dirty
            || ContractDetailsForm.get('workShortTime')?.touched" />
          <p-message severity="error" variant="simple" size="small" *ngIf="ContractDetailsForm.get('workShortTime')?.invalid && ContractDetailsForm.get('workShortTime')?.dirty">
            {{ 'ERROR.NUMBER_MAX' | translate }}
          </p-message>
        </div>
      </div>
      <div class="contract_input">
        <label for="specialPayment">{{ 'EMPLOYEE-CONTRACTS.FORM.SPECIAL_PAYMENT' | translate }}</label>
        <p-inputnumber mode="decimal" [max]="99999.99" [min]="0" [useGrouping]="true" [inputStyle]="{'text-align': 'right'}"
          [minFractionDigits]="2" [maxFractionDigits]="2" locale="de-DE" inputId="specialPayment" formControlName="specialPayment" autocomplete="off"
          [ngClass]="{'ng-invalid': ContractDetailsForm.get('specialPayment')?.invalid && ContractDetailsForm.get('specialPayment')?.dirty && ContractDetailsForm.get('specialPayment')?.touched}" />
        <p-message severity="error" variant="simple" size="small" *ngIf="ContractDetailsForm.get('specialPayment')?.invalid && ContractDetailsForm.get('specialPayment')?.dirty && ContractDetailsForm.get('specialPayment')!.hasError('pattern')">
          {{ 'ERROR.NUMBER_FORMAT_ERROR' | translate }}
        </p-message>
      </div>
      <div class="contract_input">
        <label for="maxHoursPerMonth">{{ 'EMPLOYEE-CONTRACTS.FORM.MAX_HOURS_PER_MONTH' | translate }}</label>
        <p-inputnumber mode="decimal" [max]="99999.99" [min]="0" [useGrouping]="true" [inputStyle]="{'text-align': 'right'}"
          [minFractionDigits]="2" [maxFractionDigits]="2" locale="de-DE" inputId="maxHoursPerMonth" formControlName="maxHoursPerMonth" autocomplete="off"
          [ngClass]="{'ng-invalid': ContractDetailsForm.get('maxHoursPerMonth')?.invalid && ContractDetailsForm.get('maxHoursPerMonth')?.dirty && ContractDetailsForm.get('maxHoursPerMonth')?.touched}" />
        <p-message severity="error" variant="simple" size="small" *ngIf="ContractDetailsForm.get('maxHoursPerMonth')?.invalid && ContractDetailsForm.get('maxHoursPerMonth')?.dirty && ContractDetailsForm.get('maxHoursPerMonth')!.hasError('pattern')">
          {{ 'ERROR.NUMBER_FORMAT_ERROR' | translate }}
        </p-message>
      </div>
      <div class="contract_input">
        <label for="maxHoursPerDay">{{ 'EMPLOYEE-CONTRACTS.FORM.MAX_HOURS_PER_DAY' | translate }}</label>
        <p-inputnumber mode="decimal" [max]="99999.99" [min]="0" [useGrouping]="true" [inputStyle]="{'text-align': 'right'}"
          [minFractionDigits]="2" [maxFractionDigits]="2" locale="de-DE" inputId="maxHoursPerDay" formControlName="maxHoursPerDay" autocomplete="off"
          [ngClass]="{'ng-invalid': ContractDetailsForm.get('maxHoursPerDay')?.invalid && ContractDetailsForm.get('maxHoursPerDay')?.dirty && ContractDetailsForm.get('maxHoursPerDay')?.touched}" />
        <p-message severity="error" variant="simple" size="small" *ngIf="ContractDetailsForm.get('maxHoursPerDay')?.invalid && ContractDetailsForm.get('maxHoursPerDay')?.dirty && ContractDetailsForm.get('maxHoursPerDay')!.hasError('pattern')">
          {{ 'ERROR.NUMBER_FORMAT_ERROR' | translate }}
        </p-message>
      </div>
      <div class="contract_input">
        <label for="hourlyRate">{{ 'EMPLOYEE-CONTRACTS.FORM.HOURLY_RATE' | translate }}</label>
        <p-inputnumber mode="decimal" [max]="99999.99" [min]="0" [useGrouping]="true" [inputStyle]="{'text-align': 'right'}"
          [minFractionDigits]="2" [maxFractionDigits]="2" locale="de-DE" inputId="hourlyRate" formControlName="hourlyRate" autocomplete="off"
          [ngClass]="{'ng-invalid': ContractDetailsForm.get('hourlyRate')?.invalid && ContractDetailsForm.get('hourlyRate')?.dirty && ContractDetailsForm.get('hourlyRate')?.touched}" />
        <p-message severity="error" variant="simple" size="small" *ngIf="ContractDetailsForm.get('hourlyRate')?.invalid && ContractDetailsForm.get('hourlyRate')?.dirty && ContractDetailsForm.get('hourlyRate')!.hasError('pattern')">
          {{ 'ERROR.NUMBER_FORMAT_ERROR' | translate }}
        </p-message>
      </div>
      <div class="contract_input">
        <label for="hourlyRealRate">{{ 'EMPLOYEE-CONTRACTS.FORM.HOURLY_REAL_RATE' | translate }}</label>
        <p-inputnumber mode="decimal" [max]="99999.99" [min]="0" [useGrouping]="true" [inputStyle]="{'text-align': 'right'}"
          [minFractionDigits]="2" [maxFractionDigits]="2" locale="de-DE" inputId="hourlyRealRate" formControlName="hourlyRealRate" autocomplete="off"
          [ngClass]="{'ng-invalid': ContractDetailsForm.get('hourlyRealRate')?.invalid && ContractDetailsForm.get('hourlyRealRate')?.dirty && ContractDetailsForm.get('hourlyRealRate')?.touched}" />
        <p-message severity="error" variant="simple" size="small" *ngIf="ContractDetailsForm.get('hourlyRealRate')?.invalid && ContractDetailsForm.get('hourlyRealRate')?.dirty && ContractDetailsForm.get('hourlyRealRate')!.hasError('pattern')">
          {{ 'ERROR.NUMBER_FORMAT_ERROR' | translate }}
        </p-message>
      </div>
    </div>
    <div class="buttons-container flex justify-content-center gap-3 mt-4">
      <p-button class="save" type="submit" [loading]="isEmployeeContractLoading" [disabled]="!ContractDetailsForm.valid || !currentCustomer" size="small" [label]="'BUTTONS.SAVE' | translate" icon="pi pi-check" iconPos="left" />
      <ng-container *ngIf="currentEmploymentContractEntity">
        <p-button class="delete" size="small" [label]="'BUTTONS.DELETE' | translate" icon="pi pi-trash" iconPos="left" [style]="{ background: '#ef4444' }" (onClick)="this.visiblEmployeeContractModal = true;" />
      </ng-container>
      <p-button class="cancel" size="small" [label]="'BUTTONS.CANCEL' | translate" icon="pi pi-times" iconPos="left" (onClick)="closeModal()"/>      
    </div>
  </form>
</ng-container>
<ng-template #deleteTemplate>
  <div class="confirmation-content mt-4">
    <p *ngIf="currentEmploymentContractEntity" class="mb-4">
      {{ 'EMPLOYEE-CONTRACTS.LABEL.REMOVE_EMPLOYEE_CONTRACT_QUESTION' | translate }} <strong class="stronglock mt-1">"{{ currentEmploymentContractEntity.id }}"</strong>?
    </p>

    <div class="flex justify-content-center gap-3">
      <p-button type="button" class="delete" size="small" [label]="'BUTTONS.DELETE' | translate"
        icon="pi pi-trash" iconPos="left" severity="danger" (onClick)="deleteEmployeeContractEntity()"
        [loading]="isEmployeeContractLoading" 
      />
      <p-button type="button" class="cancel" size="small" [label]="'BUTTONS.CANCEL' | translate"
        icon="pi pi-times" iconPos="left" (onClick)="closeModal()"
      />
    </div>
  </div>
</ng-template>
<app-occ-error-modal
  *ngIf="showOCCErrorModalContract"
  [errorType]="occErrorType"
  [reloadCurrentPage]="true"
  (onClose)="showOCCErrorModalContract = false">
</app-occ-error-modal>
<p-dialog 
  [header]="'EMPLOYEE-CONTRACTS.LABEL.DELETE_EMPLOYEE_CONTRACT' | translate" 
  [modal]="true" 
  [(visible)]="visiblEmployeeContractModal"
>
  <div class="confirmation-content mt-4 dialog-container">
    <p *ngIf="currentEmploymentContractEntity"  class="mb-4 dialog-title">
      {{ 'EMPLOYEE-CONTRACTS.LABEL.REMOVE_EMPLOYEE_CONTRACT_QUESTION' | translate }}<strong class="stronglock mt-1">"{{ currentEmploymentContractEntity.id }}"</strong>?
    </p>

    <div class="flex justify-content-center gap-3 buttons-container">
      <p-button type="button" class="delete" size="small" [label]="'BUTTONS.DELETE' | translate"
        icon="pi pi-trash" iconPos="left" severity="danger" (onClick)="deleteEmployeeContractEntity()"
        [loading]="isEmployeeContractLoading" 
      />
      <p-button type="button" class="cancel" size="small" [label]="'BUTTONS.CANCEL' | translate"
        icon="pi pi-times" iconPos="left" (onClick)="this.visiblEmployeeContractModal = false;"
      />
    </div>
  </div>
</p-dialog>